<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Accueil</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="stylesheets/style.css" type="text/css">
</head>
    <body>
    <h1 class="text-uppercase text-center pb-5 pt-5">planning</h1>
    <section id="main">
        <div class="container-fluid d-flex text-center justify-content-center">
            <form action="/creer" method="post">
                <div class="row justify-content-center">
                    <div class="col-md-2">
                        <label class="my-1 mr-2" for="id_tache">Taches</label>
                        <select class="custom-select my-1 mr-sm-2" id="id_tache" name="id_tache" required>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="my-1 mr-2" for="id_personne">Personnes</label>
                        <select class="custom-select my-1 mr-sm-2" id="id_personne" name="id_personne" required>
                            <% personnes.forEach(function(element){ %>
                            <option value="<%= element._id %>"><%= element.nom %> -- <%= element.prenom %></option>
                            <% });%>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label for="id_tache">Date Debut</label>
                        <input type="date" class="form-control" name="date_debut" required>
                    </div>
                    <div class="col-md-2">
                        <label for="id_tache">Date Fin</label>
                        <input type="date" class="form-control pr-3" name="date_fin" required>
                    </div>
                    <div class="col-md-2">
                        <label for="id_tache">Heure</label>
                        <input type="time" class="form-control pr-3" name="hour" required>
                    </div>
                    <div class="col-md-2 d-flex justify-content-center mt-4 align-items-center">
                        <button class="btn btn-primary">Ajouter une tache</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="container pt-5" id="card-main">
            <div class="row justify-content-around">
                <% data.forEach(function (element) { %>
                <div class="card mb-5" style="width: 18rem;">
                    <div class="card-body text-center">
                        <% element.id_tache.forEach(function(element){%>
                        <h5 class="card-title"><%= element.nom %></h5>
                        <%})%>
                        <h6><b>Du:</b> <%= element.date_debut %> <b>Au:</b> <%= element.date_fin%></h6>
                        <p class="card-text">
                            <% element.id_tache.forEach(function (element) { %>
                        <h6><b>Commentaire</b> : <%= element.commentaire %></h6>
                            <% }) %>
                        </p>
                        <p class="card-text">
                            <% element.id_personne.forEach(function (element) { %>
                        <h6><b>Attribuée à</b>  : <%= element.prenom %>  <%= element.nom %></h6>
                            <% }) %>
                        </p>
                        <!--TODO modal edition de la tache a effectuer-->
                        <a href="edit/<%= element._id %>" class="btn btn-info bg-info">Editer</a>
                        <a href="/delete/<%= element._id %>" class="btn btn-primary bg-primary">X</a>
                    </div>
                </div>
                <% }) %>
            </div>
        </div>
    </section>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <script src="javascripts/effectuer.js"></script>
    <script src="/tache"></script>
    </body>
</html>